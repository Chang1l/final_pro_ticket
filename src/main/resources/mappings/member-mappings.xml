<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MemberDAO">
	<!-- 회원가입 -->
	<insert id="insertMember">
		INSERT INTO MEMBER(MB_ID, MB_PW, MB_NAME, MB_PHONE, MB_EMAIL)
		VALUES( #{mb_id}, #{mb_pw}, #{mb_name}, #{mb_phone}, #{mb_email})
	</insert>
	<!-- 마이페이지 회원탈퇴 -->
	<delete id="deleteMember">
		DELETE FROM MEMBER WHERE MB_ID = #{mb_id}
	</delete>
<!-- 마이페이지 회원조회 -->
<select id="getMember" resultType="member">
	SELECT * FROM MEMBER WHERE MB_ID = #{mb_id}
</select>
<!-- 마이페이지 회원수정 -->
		<update id="updateMember">
		UPDATE MEMBER
		SET
		MB_NAME=#{mb_name}
		WHERE
		MB_ID = #{mb_id}
	</update>
	<!-- 로그인 -->
	<select id="loginCheck" resultType="member">SELECT * FROM MEMBER WHERE
		MB_ID = #{mb_id} AND MB_PW = #{mb_pw} </select>

	<!-- 멤버조회 -->
	<select id="getMemberList" resultType="member">
		SELECT * FROM MEMBER WHERE 1=1
		<if test="searchCondition == 'MB_ID' "> AND MB_ID LIKE CONCAT('%', #{searchKeyword},'%')</if>
		<if test="searchCondition == 'MB_NAME' "> AND MB_NAME LIKE CONCAT('%', #{searchKeyword},'%')</if>
		<if test="searchCondition == 'MB_PHONE' "> AND MB_PHONE LIKE CONCAT('%', #{searchKeyword},'%')</if>
		<if test="searchCondition == 'MB_EMAIL' "> AND MB_EMAIL LIKE CONCAT('%', #{searchKeyword},'%')</if>
		ORDER BY MB_ID DESC
		LIMIT 10 OFFSET #{offset}
	</select>

	<select id="totalMemberListCnt" resultType="_int">
		SELECT Count(*) FROM MEMBER WHERE 1=1
		<if test="searchCondition == 'MB_ID' "> AND MB_ID LIKE CONCAT('%', #{searchKeyword},'%')</if>
		<if test="searchCondition == 'MB_NAME' "> AND MB_NAME LIKE CONCAT('%', #{searchKeyword},'%')</if>
		<if test="searchCondition == 'MB_PHONE' "> AND MB_PHONE LIKE CONCAT('%', #{searchKeyword},'%')</if>
		<if test="searchCondition == 'MB_EMAIL' "> AND MB_EMAIL LIKE CONCAT('%', #{searchKeyword},'%')</if>
	</select>

	
	
	<!-- 멤버삭제 -->
</mapper>